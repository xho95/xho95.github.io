---
layout: post
comments: true
title:  "Swift: API Design Guidelines (API 설계 지침)"
date:   2020-03-16 10:00:00 +0900
categories: Swift Language Grammar Revision History
---

## API Design Guidelines (API 설계 지침)

### Table of Contents (목차)

* [Fundamentals (근본 바탕)](#fundamentals-근본-바탕)
* [Naming](#naming-이름짓기)
- Promote Clear Usage
- Strive for Fluent Usage
- Use Terminology Well
* Conventions
- General Conventions
- Parameters
- Argument Labels
* Special Instructions

### Fundamentals (근본 바탕)

* **사용하는 순간에 분명한 것** 이 가장 중요한 목표입니다. 메소드와 속성 같은 엔티티는 한 번 선언해서 계속 반복 _사용합니다 (used)_. 명확하고 간결하게 사용할 수 있도록 API 를 설계해야 합니다. 설계를 평가할 때, 선언을 읽고 이해하는 것으로는 충분하지 않습니다; 상황에 따라 명확하게 보일 수 있게 항상 실제 사용 사례를 검토하도록 합니다.

* **분명한 것이 간결한 것보다 더 중요합니다.** 스위프트 코드를 알차게 만들 수는 있더라도, 최소의 문자로 가능한 가장 작은 코드를 만들려고 하는 것이 _목표는-아닙니다 (non-goal)_. 스위프트 코드에서, 발생하는, 간결함이란, 강한 타입 시스템으로 인한 부수적인 효과인 것으로 획일적인 상용구를 자연스럽게 줄이는 특징을 가집니다.

* **문서화 주석 (documentation comment) 의 작성을** 모든 선언마다 합니다. 문서화를 작성하며 얻은 통찰력은 설계에 큰 영향을 줄 수 있으므로, 미루지 않도록 합니다.

API 의 기능을 간단한 용어로 설명하는 데 어려움을 겪고 있다면, **잘못된 API 를 설계하고 있는 것일 수 있습니다.**

- 스위프트 '전용 마크 다운 ([dialect of Markdown](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/))' 을 사용하기 바랍니다.

- **요약으로 시작해서** 엔티티 선언에 대한 설명을 합니다. 대체로, API 는 선언과 요약으로도 완전히 이해할 수 있습니다.

```swift
/// Returns a "view" of `self` containing the same elements in
/// reverse order.
/// 같은 원소를 반대 순서로 가지고 있는 `self` 의 "view" 를 반환합니다.
func reversed() -> ReverseCollection
```

1. **요약에 집중합니다**; 가장 중요한 부분입니다. 훌륭한 문서 주석 대부분은 사실 뛰어난 요약에 지나지 않습니다.

2. **단일한 문장 구절을**[^fragment] 가능한한 사용하며, 마침표로 끝맺습니다. 완전한 문장은 사용하지 않습니다.[^complete-sentence]

3. **함수나 메소드가 무엇을 _하는 (does)_ 지 무엇을 _반환하는 (returns)_ 지를 설명하고**, 없는 효과 (null effects) 와 `Void` 반환은 생략합니다:

```swift
/// Inserts `newHead` at the beginning of `self`.
/// `self` 의 처음 위치에 `newHead` 를 집어 넣습니다.
mutating func prepend(_ newHead: Int)

/// Returns a `List` containing `head` followed by the elements
/// of `self`.
/// 뒤에 `self` 의 원소가 있는 `head` 를 담고 있는 `List` 를 반환합니다.
func prepending(_ head: Element) -> List

/// Removes and returns the first element of `self` if non-empty;
/// returns `nil` otherwise.
/// 비어 있지 않은 경우 `self` 의 첫 번째 원소를 제거하고 반환합니다;
/// 다른 경우라면 `nil` 을 반환합니다.
mutating func popFirst() -> Element?
```

참고: 위의 `popFirst` 같이 드문 경우에 한하여, 요약을 여러 개의 문장 구절로 형성하고 세미콜론으로 구분합니다.

4. **첨자 연산 (subscript) 이 _접근하는 (accesses)_ 것이 무엇인지 설명합니다.**

```swift
/// Accesses the `index`th element.
/// `index` 번째 원소에 접근합니다.
subscript(index: Int) -> Element { get set }
```

5. **초기자가 _생성하는 (creates)_ 것이 무엇인지 설명합니다.**

```swift
/// Creates an instance containing `n` repetitions of `x`.
/// `x` 를 `n` 번 반복하여 담고 있는 인스턴스를 생성합니다.
init(count n: Int, repeatedElement x: Element)
```

6. 다른 모든 선언에 대해서는, **선언한 엔티티가 무엇 _인지 (is)_ 를 설명합니다.**

```swift
/// A collection that supports equally efficient insertion/removal
/// at any position.
/// 어떤 위치에서도 같은 효율을 가지는 삽입/제거를 지원하는 컬렉션.
struct List {

  /// The element at the beginning of `self`, or `nil` if self is
  /// empty.
  /// `self` 의 시작 위치에 있는 원소, 또는 self 가 비어 있는 경우 `nil` 입니다.
  var first: Element?
  ...
```

- **선택 사항으로, 계속하여** 하나 이상의 문단과 '목록 항목 (bullet items)' 을 둡니다. 문단은 빈 줄로 구분하며 '완전한 문장 (complete sentences)' 을 사용합니다.

```swift
/// Writes the textual representation of each    ← Summary
/// element of `items` to the standard output.
///                                              ← Blank line
/// The textual representation for each item `x` ← Additional discussion
/// is generated by the expression `String(x)`.
///
/// - Parameter separator: text to be printed    ⎫
///   between items.                             ⎟
/// - Parameter terminator: text to be printed   ⎬ Parameters section
///   at the end.                                ⎟
///                                              ⎭
/// - Note: To print without a trailing          ⎫
///   newline, pass `terminator: ""`             ⎟
///                                              ⎬ Symbol commands
/// - SeeAlso: `CustomDebugStringConvertible`,   ⎟
///   `CustomStringConvertible`, `debugPrint`.   ⎭
public func print(
  _ items: Any..., separator: String = " ", terminator: String = "\n")

/// `items` 에 있는 각 원소에 대한 문장 형태의 표현을      ← 요약
/// 표준 출력 장치에 작성합니다.
///                                              ← 빈 줄
/// 각각의 항목 `x` 에 대한 문장 형태의 표현은            ← 추가적인 설명
/// `String(x)` 표현식으로 생성합니다.
///
/// - Parameter separator: 항목들 사이에 출력되는 문장   ⎫
/// - Parameter terminator: 맨 끝에 출력되는 문장      ⎬ 매개 변수 부분
///                                               ⎭
/// - Note: 끝자리에 '새 줄 (newline)' 없이 출력하려면   ⎫
///   `terminator: ""` 를 전달합니다                 ⎟
///                                               ⎬ 기호 명령
/// - SeeAlso: `CustomDebugStringConvertible`,    ⎟
///   `CustomStringConvertible`, `debugPrint`.    ⎭
public func print(
  _ items: Any..., separator: String = " ", terminator: String = "\n")
```

1. **인식이 되는 '기호 문서화 마크업 ([symbol documentation markup](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/SymbolDocumentation.html#//apple_ref/doc/uid/TP40016497-CH51-SW1))' 원소를 사용하여**, 적당할 때마다, 요약 이외의 정보를 추가합니다.

2. '기호 명령 구문 표현 ([symbol command syntax](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/SymbolDocumentation.html#//apple_ref/doc/uid/TP40016497-CH51-SW13))'[^symbol-comman-syntax] 으로 된 인식이 되는 '목록 항목 (bullet items)' 을 알아 보고 사용하도록 합니다. 'Xcode' 같은 대중적인 개발 도구들은 아래 키워드로 시작하는 '목록 항목 (bullet items)' 을 특수하게 처리합니다.

---|---|---|---
[Attention](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Attention.html)	| [Author](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Author.html) | [Authors](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Authors.html) | [Bug](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Bug.html)
[Complexity](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Complexity.html) | [Copyright](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Copyright.html)	| [Date](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Date.html) | [Experiment](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Experiment.html)
[Important](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Important.html)	| [Invariant](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Invariant.html) | [Note](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Note.html) | [Parameter](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Parameter.html)
[Parameters](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Parameters.html) | [Postcondition](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Postcondition.html) | [Precondition](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Precondition.html) | [Remark](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Remark.html)
[Requires](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Requires.html) | [Returns](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Returns.html) | [SeeAlso](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/SeeAlso.html) | [Since](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Since.html)
[Throws](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Throws.html) | [ToDo](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Todo.html) | [Version](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Version.html) | [Warning](https://developer.apple.com/library/archive/documentation/Xcode/Reference/xcode_markup_formatting_ref/Warning.html)

### Naming (이름짓기)

#### Promote Clear Usage (명확한 사용법 촉진하기)

* **필요한 모든 단어를 포함하도록 하여** 이름이 사용된 코드를 읽는 사람의 모호함을 피하도록 합니다.

예를 들어, 컬렉션 내에서 주어진 위치의 원소를 제고하는 메소드를 고려해 봅니다.

```swift
extension List {
  public mutating func remove(at position: Index) -> Element
}
employees.remove(at: x)
```

'메소드 서명 (method signature)' 에서 `at` 이라는 단어를 생략한다면, 읽는 사람이, `x` 를 제거할 원소의 위치를 지정하는데 사용하는 것이 아니라, `x` 와 같은 원소를 찾아서 제거하는 메소드라고 생각할 수 있을 것입니다.

```swift
employee.remove (x) // 불분명함 : x를 제거하는 것일까요?
```

#### Promote Clear Usage

#### Strive for Fluent Usage

#### Use Terminology Well

### Conventions

#### General Conventions

#### Parameters

#### Argument Labels

### Special Instructions

### 참고 자료

[^fragment]: 여기서 '문장 구절 (sentence fragment)' 을 사용하라는 것은 완전한 문장이 아니라, 하나의 구절 형태로 사용하라는 의미입니다.

[^complete-sentence]: 왜 완전한 문장을 사용하지 않는 지에 대한 설명은 따로 없는 것 같습니다. 최대한 간단하게 핵심만 정리하라는 의미로 이해할 수 있습니다.

[^symbol-comman-syntax]: 사실 링크 자체는 바로 위에 있는 링크와 같은 문서로 연결됩니다.
