---
layout: post
comments: true
title:  "Swift 5.3: Patterns (패턴; 유형)"
date:   2020-08-25 11:30:00 +0900
categories: Swift Language Grammar Pattern
---

> Apple 에서 공개한 [The Swift Programming Language (Swift 5.3)](https://docs.swift.org/swift-book/) 책의 [Patterns](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html) 부분[^Patterns]을 번역하고, 설명이 필요한 부분은 주석을 달아서 정리한 글입니다.
>
> 현재 번역이 진행 중인데, 2020-06-22 에 Swift 5.3 이 발표되어, 이미 번역된 부분과 남은 부분 모두 Swift 5.3 을 기준으로 옮기도록 합니다. 완료된 목록은 [Swift 5.3: Swift Programming Language (스위프트 프로그래밍 언어)]({% post_url 2017-02-28-The-Swift-Programming-Language %}) 에서 확인할 수 있으며, 일부는 Swift 5.2 기준일 수 있습니다.

## Patterns (패턴; 유형)

_패턴 (pattern)_ 은 '단일한 값' 이나 '합성된 값 (composite value)' 의 '구조 (structure)' 를 표현합니다. 예를 들어, 튜플 `(1, 2)` 의 구조는 '두 원소를 쉼표로 구분한 목록' 입니다. 패턴은 특정한 값이 아니라 '값의 구조' 를 표현하는 것이기 때문에, 다양한 값들과 일치할 수 있습니다. 예를 들어, 패턴 `(x, y)` 는 튜플 `(1, 2)` 및 원소가-둘 인 어떤 다른 튜플과도 일치합니다. 값과 일치하는 패턴을 찾는 것 외에도, 합성된 값의 일부 또는 전체를 추출하여 각 부분을 상수나 변수 이름에 연결시킬 수 있습니다.

스위프트에는, 두 가지 종류의 기본 패턴이 있습니다: 어떤 종류의 값과도 성공적으로 일치하는 것과, 실행 시간에 지정한 값과의 일치가 실패하는 것이 그것입니다.

첫 번째 종류의 패턴은 단순 변수, 단순 상수, 및 '옵셔널 연결 (optional binding)' 에 있는 값을 '구조에서 빼기 (destructuring)' 위해 사용합니다. 여기에는 '와일드카드 패턴 (wildcard patterns)', '식별자 패턴 (identifier patterns)', 및 이들을 가지는 어떤 '값 연결 (value binding)' 또는 '튜플 패턴 (tuple patterns)' 이 포함되어 있습니다. 이 패턴들에 대한 '타입 보조 설명 (type annotation)' 을 지정하면 정해진 타입의 값과만 일치하도록 구속할 수 있습니다.

두 번째 종류의 패턴은, 일치하는지 맞춰보려는 값이 실행 시간에 없을 수도 있는, '온전한 패턴 맞춤 (full pattern matching)' 에서 사용합니다. 여기에는 '열거체 case 값 패턴 (enumeration case patterns)', '옵셔널 패턴 (optional patterns)', '표현식 패턴 (expression patterns)', 및 '타입-변환 패턴 (type-casting patterns)' 이 포함되어 있습니다. 이러한 패턴은 `switch` 문의 `case` 이름표 안이나, `do` 문의 `catch` 절, 또는 `if`, `while`, `guard`, 및 `for`-`in` 문의 `case` 조건절에서 사용합니다.

> GRAMMAR OF A PATTERN 부분 생략 - [링크](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html)

### Wildcard Pattern (와일드카드 패턴)

_와일드카드 패턴 (wildcard pattern)_ 은 어떤 값과도 일치하면서 이를 무시하는 것으로 '밑줄 (`_`)' 로 구성됩니다. 일치하는지 맞춰보려는 값을 신경쓰지 않을 때 '와일드카드 패턴' 을 사용합니다. 예를 들어, 다음 코드는 '닫힌 범위' 인 `1...3` 에 대해서, 반복문의 각 회차에 대한 현재 범위 값을 무시한채로, 동작을 반복합니다:

```swift
for _ in 1...3 {
  // 어떤 것을 세 번 반복합니다.
}
```

> GRAMMAR OF A WILD PATTERN 부분 생략 - [링크](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html#ID420)

### Identifier Pattern (식별자 패턴)

_식별자 패턴 (identifer pattern)_ 은 어떤 값과도 일치하면서 이 일치하는 값을 변수 또는 상수 이름에 연결합니다. 예를 들어, 다음의 상수 선언에 있는, `someValue` 는 `Int` 타입의 값 `42` 와 일치하는 '식별자 패턴' 입니다:

```swift
let someValue = 42
```

일치가 성공하면, `42` 라는 값이 `someValue` 라는 상수 이름에 연결 (할당) 됩니다.

변수나 상수 선언의 왼쪽에 있는 패턴이 식별자 패턴일 때, 그 식별자 패턴은 암시적으로 값-연결 패턴의 하위 패턴이 됩니다.

> GRAMMAR OF A IDENTIFIER PATTERN 부분 생략 - [링크](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html#ID421)

### Value-Binding Pattern (값-연결 패턴)

_값-연결 패턴 (value-binding pattern)_ 은 일치하는 값을 변수 이름 또는 상수 이름에 연결합니다. 일치하는 값을 상수 이름에 연결하는 값-연결 패턴은 `let` 키워드로 시작하며; 변수 이름에 연결하는 것은 `var` 키워드로 시작합니다.

값-연결 패턴 내의 식별자 패턴은 새 이름 있는 변수 또는 상수에 그들의 일치 값을 연결합니다. 예를 들어, 튜플의 원소를 분해하고 각 원소의 값을 연관된 식별자 패턴에 연결할 수 있습니다.

```swift
let point = (3, 2)
switch point {
  // x 와 y 를 점의 원소에 연결합니다.
case let (x, y):
  print("The point is at (\(x), \(y)).")
}
// "The point is at (3, 2)." 를 출력합니다.
```

위 예제에서, `let` 은 `(x, y)` 튜플 패턴에 있는 각각의 식별자 패턴으로 분배합니다. 이러한 작동 방식 때문에, `switch` 문의 'case 절' 인 `case let (x, y):` 과 `case (let x, let y):` 는 같은 값들과 일치합니다.

> GRAMMAR OF A VALUE-BINDING PATTERN 부분 생략 - [링크](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html#ID422)

### Tuple Pattern (튜플 패턴)

_튜플 패턴 (tuple pattern)_ 은 '0' 개 이상의 패턴을 쉼표로 구분하여, 괄호로 감싼, 목록입니다. 튜플 패턴은 연관된 튜플 타입의 값과 일치합니다.

'타입 보조 설명 (type annotations)' 을 사용하면 정해진 종류의 튜플 타입과 일치하도록 튜플 타입을 구속할 수 있습니다. 예를 들어, `let (x, y): (Int, Int) = (1, 2)` 라는 상수 선언에 있는 `(x, y): (Int, Int)` 라는 튜플 패턴은 두 원소가 모두 `Int` 타입인 튜플 타입과만 일치합니다.

튜플 패턴을 `for`-`in` 구문에 있는 패턴이나 변수 또는 상수 선언에 있는 패턴으로 사용할 때는, 와일드카드 패턴, 식별자 패턴, 옵셔널 패턴, 또는 이들을 가지고 있는 다른 튜플 패턴만을 가질 수 있습니다. 예를 들어, 다음의 코드는 유효하지 않는데 튜플 패턴 `(x, 0)` 에 있는 `0` 이라는 원소가 '표현식 패턴 (expression pattern)' 이기 때문입니다:

```Swift
let points = [(0, 0), (1, 0), (1, 1), (2, 0), (2, 1)]
// 이 코드는 유효하지 않습니다.
for (x, 0) in points {
    /* ... */
}
```

단일 원소를 가지는 튜플 패턴의 괄호는 아무런 효과가 없습니다. 이 패턴은 단일 원소 타입의 값과 일치합니다. 예를 들어, 다음은 '동치 (equivalent)' 입니다:

```swift
let a = 2        // a: Int = 2
let (a) = 2      // a: Int = 2
let (a): Int = 2 // a: Int = 2
```

> GRAMMAR OF A TUPLE PATTERN 부분 생략 - [링크](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html#ID423)

### Enumeration Case Pattern

### Optional Pattern

### Type-Casting Patterns

### Expression Pattern

### 참고 자료

[^Patterns]: 원문은 [Patterns](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html) 에서 확인할 수 있습니다.
